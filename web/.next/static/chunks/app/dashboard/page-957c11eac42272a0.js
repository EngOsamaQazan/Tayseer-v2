(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1538:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5896),r=s(3684),l=s(4722);function n(e){let{title:t,value:s,subtitle:r,color:l}=e,n={emerald:"bg-emerald-50 border-emerald-200",blue:"bg-blue-50 border-blue-200",red:"bg-red-50 border-red-200",purple:"bg-purple-50 border-purple-200"},c={emerald:"text-emerald-700",blue:"text-blue-700",red:"text-red-700",purple:"text-purple-700"};return(0,a.jsxs)("div",{className:"rounded-xl border p-6 ".concat(n[l]||n.emerald),children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t}),(0,a.jsx)("p",{className:"text-3xl font-bold ".concat(c[l]||c.emerald),children:"number"==typeof s?s.toLocaleString("ar-SA"):s}),r&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:r})]})}function c(){let[e,t]=(0,r.useState)(null),[s,c]=(0,r.useState)(!0),[d,i]=(0,r.useState)("");return((0,r.useEffect)(()=>{l.F.get("/dashboard").then(t).catch(e=>i(e.message)).finally(()=>c(!1))},[]),s)?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-pulse text-gray-500",children:"جاري تحميل البيانات..."})}):d?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:["خطأ: ",d]}):e?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"لوحة التحكم"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"نظرة عامة على النظام"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)(n,{title:"العملاء",value:e.counts.customers,subtitle:"إجمالي العملاء المسجلين",color:"blue"}),(0,a.jsx)(n,{title:"المستثمرون",value:e.counts.companies,subtitle:"إجمالي الشركات",color:"purple"}),(0,a.jsx)(n,{title:"إجمالي الدخل",value:"".concat(e.financials.totalIncome.toLocaleString("ar-SA")," د.أ"),subtitle:"".concat(e.financials.incomeCount," حركة"),color:"emerald"}),(0,a.jsx)(n,{title:"إجمالي المصاريف",value:"".concat(e.financials.totalExpense.toLocaleString("ar-SA")," د.أ"),subtitle:"".concat(e.financials.expenseCount," حركة"),color:"red"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-1",children:"صافي الرصيد"}),(0,a.jsxs)("p",{className:"text-4xl font-bold ".concat(e.financials.netBalance>=0?"text-emerald-600":"text-red-600"),children:[e.financials.netBalance.toLocaleString("ar-SA")," د.أ"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"الدخل - المصاريف = صافي الرصيد"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"الدخل الشهري"}),e.charts.monthlyIncome.length>0?(0,a.jsx)("div",{className:"space-y-2",children:e.charts.monthlyIncome.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:e.month}),(0,a.jsxs)("span",{className:"font-medium text-emerald-600",children:[Number(e.total).toLocaleString("ar-SA")," د.أ"]})]},e.month))}):(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"لا توجد بيانات بعد"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"آخر الحركات المالية"}),e.recentTransactions.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b text-gray-500",children:[(0,a.jsx)("th",{className:"pb-3 text-start font-medium",children:"النوع"}),(0,a.jsx)("th",{className:"pb-3 text-start font-medium",children:"المبلغ"}),(0,a.jsx)("th",{className:"pb-3 text-start font-medium",children:"التاريخ"}),(0,a.jsx)("th",{className:"pb-3 text-start font-medium",children:"الحالة"}),(0,a.jsx)("th",{className:"pb-3 text-start font-medium",children:"الوصف"})]})}),(0,a.jsx)("tbody",{children:e.recentTransactions.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[(0,a.jsx)("td",{className:"py-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("income"===e.type?"bg-emerald-100 text-emerald-700":"expense"===e.type?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:"income"===e.type?"دخل":"expense"===e.type?"مصاريف":e.type})}),(0,a.jsxs)("td",{className:"py-3 font-medium",children:[Number(e.amount).toLocaleString("ar-SA")," د.أ"]}),(0,a.jsx)("td",{className:"py-3 text-gray-600",children:e.date}),(0,a.jsx)("td",{className:"py-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("confirmed"===e.status?"bg-green-100 text-green-700":"reversed"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"confirmed"===e.status?"مؤكد":"reversed"===e.status?"ملغي":"معلق"})}),(0,a.jsx)("td",{className:"py-3 text-gray-600",children:e.description||"-"})]},e.id))})]})}):(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"لا توجد حركات مالية بعد"})]})]}):null}},4722:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});class a{setToken(e){this.token=e,e?localStorage.setItem("token",e):localStorage.removeItem("token")}getToken(){return this.token||(this.token=localStorage.getItem("token")),this.token}async request(e,t,s){let a={"Content-Type":"application/json"},r=this.getToken();r&&(a.Authorization="Bearer ".concat(r));let l=await fetch("".concat("/api/v1").concat(t),{method:e,headers:a,body:s?JSON.stringify(s):void 0});if(401===l.status)throw this.setToken(null),window.location.href="/login",Error("Unauthorized");if(!l.ok)throw Error((await l.json().catch(()=>({message:l.statusText}))).message||l.statusText);return l.json()}get(e){return this.request("GET",e)}post(e,t){return this.request("POST",e,t)}put(e,t){return this.request("PUT",e,t)}delete(e){return this.request("DELETE",e)}constructor(){this.token=null}}let r=new a},9419:(e,t,s)=>{Promise.resolve().then(s.bind(s,1538))}},e=>{e.O(0,[880,977,358],()=>e(e.s=9419)),_N_E=e.O()}]);